{"ast":null,"code":"import _objectSpread from\"/Users/damnitstiff/Desktop/coding/twelve/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// import react dependencies\nimport React from\"react\";import{Link}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";// import utils dependencies\nimport{ADD_TO_CART,UPDATE_CART_QUANTITY}from\"../../utils/actions\";import{pluralize}from\"../../utils/helpers\";import{idbPromise}from\"../../utils/helpers\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductItem(item){var dispatch=useDispatch();var state=useSelector(function(state){return state;});var image=item.image,name=item.name,_id=item._id,price=item.price,quantity=item.quantity;var cart=state.cart;// update cart quantity if itemInCart exists; otherwise add to cart\nvar addToCart=function addToCart(){var itemInCart=cart.find(function(cartItem){return cartItem._id===_id;});if(itemInCart){dispatch({type:UPDATE_CART_QUANTITY,_id:_id,purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1});idbPromise(\"cart\",\"put\",_objectSpread(_objectSpread({},itemInCart),{},{purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1}));}else{dispatch({type:ADD_TO_CART,product:_objectSpread(_objectSpread({},item),{},{purchaseQuantity:1})});idbPromise(\"cart\",\"put\",_objectSpread(_objectSpread({},item),{},{purchaseQuantity:1}));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card px-1 py-1\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/products/\".concat(_id),children:[/*#__PURE__*/_jsx(\"img\",{alt:name,src:\"/images/\".concat(image)}),/*#__PURE__*/_jsx(\"p\",{children:name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[quantity,\" \",pluralize(\"Pair\",quantity),\" In Stock!\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",price]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addToCart,children:\"Add To Cart\"})]});}export default ProductItem;","map":{"version":3,"names":["React","Link","useDispatch","useSelector","ADD_TO_CART","UPDATE_CART_QUANTITY","pluralize","idbPromise","jsx","_jsx","jsxs","_jsxs","ProductItem","item","dispatch","state","image","name","_id","price","quantity","cart","addToCart","itemInCart","find","cartItem","type","purchaseQuantity","parseInt","_objectSpread","product","className","children","to","concat","alt","src","onClick"],"sources":["/Users/damnitstiff/Desktop/coding/twelve/client/src/components/ProductItem/index.js"],"sourcesContent":["// import react dependencies\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\n// import utils dependencies\nimport { ADD_TO_CART, UPDATE_CART_QUANTITY } from \"../../utils/actions\";\nimport { pluralize } from \"../../utils/helpers\";\nimport { idbPromise } from \"../../utils/helpers\";\n\nfunction ProductItem(item) {\n  const dispatch = useDispatch();\n  const state = useSelector((state) => state);\n  const { image, name, _id, price, quantity } = item;\n  const { cart } = state;\n\n  // update cart quantity if itemInCart exists; otherwise add to cart\n  const addToCart = () => {\n    const itemInCart = cart.find((cartItem) => cartItem._id === _id);\n    if (itemInCart) {\n      dispatch({\n        type: UPDATE_CART_QUANTITY,\n        _id: _id,\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1,\n      });\n      idbPromise(\"cart\", \"put\", {\n        ...itemInCart,\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1,\n      });\n    } else {\n      dispatch({\n        type: ADD_TO_CART,\n        product: { ...item, purchaseQuantity: 1 },\n      });\n      idbPromise(\"cart\", \"put\", { ...item, purchaseQuantity: 1 });\n    }\n  };\n\n  return (\n    <div className=\"card px-1 py-1\">\n      <Link to={`/products/${_id}`}>\n        <img alt={name} src={`/images/${image}`} />\n        <p>{name}</p>\n      </Link>\n      <div>\n        <div>\n          {quantity} {pluralize(\"Pair\", quantity)} In Stock!\n        </div>\n        <span>${price}</span>\n      </div>\n      <button onClick={addToCart}>Add To Cart</button>\n    </div>\n  );\n}\n\nexport default ProductItem;\n"],"mappings":"oIAAA;AACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CAEtD;AACA,OAASC,WAAW,CAAEC,oBAAoB,KAAQ,qBAAqB,CACvE,OAASC,SAAS,KAAQ,qBAAqB,CAC/C,OAASC,UAAU,KAAQ,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEjD,QAAS,CAAAC,WAAWA,CAACC,IAAI,CAAE,CACzB,GAAM,CAAAC,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAa,KAAK,CAAGZ,WAAW,CAAC,SAACY,KAAK,QAAK,CAAAA,KAAK,GAAC,CAC3C,GAAQ,CAAAC,KAAK,CAAiCH,IAAI,CAA1CG,KAAK,CAAEC,IAAI,CAA2BJ,IAAI,CAAnCI,IAAI,CAAEC,GAAG,CAAsBL,IAAI,CAA7BK,GAAG,CAAEC,KAAK,CAAeN,IAAI,CAAxBM,KAAK,CAAEC,QAAQ,CAAKP,IAAI,CAAjBO,QAAQ,CACzC,GAAQ,CAAAC,IAAI,CAAKN,KAAK,CAAdM,IAAI,CAEZ;AACA,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CACtB,GAAM,CAAAC,UAAU,CAAGF,IAAI,CAACG,IAAI,CAAC,SAACC,QAAQ,QAAK,CAAAA,QAAQ,CAACP,GAAG,GAAKA,GAAG,GAAC,CAChE,GAAIK,UAAU,CAAE,CACdT,QAAQ,CAAC,CACPY,IAAI,CAAErB,oBAAoB,CAC1Ba,GAAG,CAAEA,GAAG,CACRS,gBAAgB,CAAEC,QAAQ,CAACL,UAAU,CAACI,gBAAgB,CAAC,CAAG,CAC5D,CAAC,CAAC,CACFpB,UAAU,CAAC,MAAM,CAAE,KAAK,CAAAsB,aAAA,CAAAA,aAAA,IACnBN,UAAU,MACbI,gBAAgB,CAAEC,QAAQ,CAACL,UAAU,CAACI,gBAAgB,CAAC,CAAG,CAAC,EAC5D,CAAC,CACJ,CAAC,IAAM,CACLb,QAAQ,CAAC,CACPY,IAAI,CAAEtB,WAAW,CACjB0B,OAAO,CAAAD,aAAA,CAAAA,aAAA,IAAOhB,IAAI,MAAEc,gBAAgB,CAAE,CAAC,EACzC,CAAC,CAAC,CACFpB,UAAU,CAAC,MAAM,CAAE,KAAK,CAAAsB,aAAA,CAAAA,aAAA,IAAOhB,IAAI,MAAEc,gBAAgB,CAAE,CAAC,EAAE,CAAC,CAC7D,CACF,CAAC,CAED,mBACEhB,KAAA,QAAKoB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BrB,KAAA,CAACV,IAAI,EAACgC,EAAE,cAAAC,MAAA,CAAehB,GAAG,CAAG,CAAAc,QAAA,eAC3BvB,IAAA,QAAK0B,GAAG,CAAElB,IAAK,CAACmB,GAAG,YAAAF,MAAA,CAAalB,KAAK,CAAG,CAAE,CAAC,cAC3CP,IAAA,MAAAuB,QAAA,CAAIf,IAAI,CAAI,CAAC,EACT,CAAC,cACPN,KAAA,QAAAqB,QAAA,eACErB,KAAA,QAAAqB,QAAA,EACGZ,QAAQ,CAAC,GAAC,CAACd,SAAS,CAAC,MAAM,CAAEc,QAAQ,CAAC,CAAC,YAC1C,EAAK,CAAC,cACNT,KAAA,SAAAqB,QAAA,EAAM,GAAC,CAACb,KAAK,EAAO,CAAC,EAClB,CAAC,cACNV,IAAA,WAAQ4B,OAAO,CAAEf,SAAU,CAAAU,QAAA,CAAC,aAAW,CAAQ,CAAC,EAC7C,CAAC,CAEV,CAEA,cAAe,CAAApB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}