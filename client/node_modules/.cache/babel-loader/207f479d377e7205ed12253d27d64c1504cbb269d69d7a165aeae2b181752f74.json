{"ast":null,"code":"// import react dependencies\nimport React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";// import apollo dependency\nimport{useQuery}from\"@apollo/client\";// import utils dependencies\nimport{UPDATE_CATEGORIES,UPDATE_CURRENT_CATEGORY}from\"../../utils/actions\";import{QUERY_CATEGORIES}from\"../../utils/queries\";import{idbPromise}from\"../../utils/helpers\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CategoryMenu(){var dispatch=useDispatch();var state=useSelector(function(state){return state;});var categories=state.categories,currentCategory=state.currentCategory;// Add currentCategory from state\nvar _useQuery=useQuery(QUERY_CATEGORIES),loading=_useQuery.loading,categoryData=_useQuery.data;// if categoryData, loading, or dispatch is updated, update category\nuseEffect(function(){// retrieved from server\nif(categoryData){dispatch({type:UPDATE_CATEGORIES,categories:categoryData.categories});categoryData.categories.forEach(function(category){idbPromise(\"categories\",\"put\",category);});}// get cache from idb\nelse if(!loading){idbPromise(\"categories\",\"get\").then(function(categories){dispatch({type:UPDATE_CATEGORIES,categories:categories});});}},[categoryData,loading,dispatch]);// update current category when button is clicked\nvar handleClick=function handleClick(id){dispatch({type:UPDATE_CURRENT_CATEGORY,currentCategory:id});};// Clear the current category\nvar clearCategory=function clearCategory(){dispatch({type:UPDATE_CURRENT_CATEGORY,currentCategory:null});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:clearCategory,children:\"All\"}),categories.map(function(item){return/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){handleClick(item._id);},className:currentCategory===item._id?\"selected\":\"\",children:item.name},item._id);})]});}export default CategoryMenu;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","useQuery","UPDATE_CATEGORIES","UPDATE_CURRENT_CATEGORY","QUERY_CATEGORIES","idbPromise","jsx","_jsx","jsxs","_jsxs","CategoryMenu","dispatch","state","categories","currentCategory","_useQuery","loading","categoryData","data","type","forEach","category","then","handleClick","id","clearCategory","children","onClick","map","item","_id","className","name"],"sources":["/Users/damnitstiff/Desktop/coding/twelve/client/src/components/CategoryMenu/index.js"],"sourcesContent":["// import react dependencies\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\n// import apollo dependency\nimport { useQuery } from \"@apollo/client\";\n\n// import utils dependencies\nimport {\n  UPDATE_CATEGORIES,\n  UPDATE_CURRENT_CATEGORY,\n} from \"../../utils/actions\";\nimport { QUERY_CATEGORIES } from \"../../utils/queries\";\nimport { idbPromise } from \"../../utils/helpers\";\n\nfunction CategoryMenu() {\n  const dispatch = useDispatch();\n  const state = useSelector((state) => state);\n  const { categories, currentCategory } = state; // Add currentCategory from state\n  const { loading, data: categoryData } = useQuery(QUERY_CATEGORIES);\n\n  // if categoryData, loading, or dispatch is updated, update category\n  useEffect(() => {\n    // retrieved from server\n    if (categoryData) {\n      dispatch({\n        type: UPDATE_CATEGORIES,\n        categories: categoryData.categories,\n      });\n      categoryData.categories.forEach((category) => {\n        idbPromise(\"categories\", \"put\", category);\n      });\n    }\n    // get cache from idb\n    else if (!loading) {\n      idbPromise(\"categories\", \"get\").then((categories) => {\n        dispatch({\n          type: UPDATE_CATEGORIES,\n          categories: categories,\n        });\n      });\n    }\n  }, [categoryData, loading, dispatch]);\n\n  // update current category when button is clicked\n  const handleClick = (id) => {\n    dispatch({\n      type: UPDATE_CURRENT_CATEGORY,\n      currentCategory: id,\n    });\n  };\n\n  // Clear the current category\n  const clearCategory = () => {\n    dispatch({\n      type: UPDATE_CURRENT_CATEGORY,\n      currentCategory: null,\n    });\n  };\n\n  return (\n    <div>\n      {/* <h2>Models:</h2> */}\n      <button onClick={clearCategory}>All</button>\n      {categories.map((item) => (\n        <button\n          key={item._id}\n          onClick={() => {\n            handleClick(item._id);\n          }}\n          className={currentCategory === item._id ? \"selected\" : \"\"}\n        >\n          {item.name}\n        </button>\n      ))}\n    </div>\n  );\n}\n\nexport default CategoryMenu;\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CAEtD;AACA,OAASC,QAAQ,KAAQ,gBAAgB,CAEzC;AACA,OACEC,iBAAiB,CACjBC,uBAAuB,KAClB,qBAAqB,CAC5B,OAASC,gBAAgB,KAAQ,qBAAqB,CACtD,OAASC,UAAU,KAAQ,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEjD,QAAS,CAAAC,YAAYA,CAAA,CAAG,CACtB,GAAM,CAAAC,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAa,KAAK,CAAGZ,WAAW,CAAC,SAACY,KAAK,QAAK,CAAAA,KAAK,GAAC,CAC3C,GAAQ,CAAAC,UAAU,CAAsBD,KAAK,CAArCC,UAAU,CAAEC,eAAe,CAAKF,KAAK,CAAzBE,eAAe,CAAY;AAC/C,IAAAC,SAAA,CAAwCd,QAAQ,CAACG,gBAAgB,CAAC,CAA1DY,OAAO,CAAAD,SAAA,CAAPC,OAAO,CAAQC,YAAY,CAAAF,SAAA,CAAlBG,IAAI,CAErB;AACApB,SAAS,CAAC,UAAM,CACd;AACA,GAAImB,YAAY,CAAE,CAChBN,QAAQ,CAAC,CACPQ,IAAI,CAAEjB,iBAAiB,CACvBW,UAAU,CAAEI,YAAY,CAACJ,UAC3B,CAAC,CAAC,CACFI,YAAY,CAACJ,UAAU,CAACO,OAAO,CAAC,SAACC,QAAQ,CAAK,CAC5ChB,UAAU,CAAC,YAAY,CAAE,KAAK,CAAEgB,QAAQ,CAAC,CAC3C,CAAC,CAAC,CACJ,CACA;AAAA,IACK,IAAI,CAACL,OAAO,CAAE,CACjBX,UAAU,CAAC,YAAY,CAAE,KAAK,CAAC,CAACiB,IAAI,CAAC,SAACT,UAAU,CAAK,CACnDF,QAAQ,CAAC,CACPQ,IAAI,CAAEjB,iBAAiB,CACvBW,UAAU,CAAEA,UACd,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACI,YAAY,CAAED,OAAO,CAAEL,QAAQ,CAAC,CAAC,CAErC;AACA,GAAM,CAAAY,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIC,EAAE,CAAK,CAC1Bb,QAAQ,CAAC,CACPQ,IAAI,CAAEhB,uBAAuB,CAC7BW,eAAe,CAAEU,EACnB,CAAC,CAAC,CACJ,CAAC,CAED;AACA,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC1Bd,QAAQ,CAAC,CACPQ,IAAI,CAAEhB,uBAAuB,CAC7BW,eAAe,CAAE,IACnB,CAAC,CAAC,CACJ,CAAC,CAED,mBACEL,KAAA,QAAAiB,QAAA,eAEEnB,IAAA,WAAQoB,OAAO,CAAEF,aAAc,CAAAC,QAAA,CAAC,KAAG,CAAQ,CAAC,CAC3Cb,UAAU,CAACe,GAAG,CAAC,SAACC,IAAI,qBACnBtB,IAAA,WAEEoB,OAAO,CAAE,SAAAA,QAAA,CAAM,CACbJ,WAAW,CAACM,IAAI,CAACC,GAAG,CAAC,CACvB,CAAE,CACFC,SAAS,CAAEjB,eAAe,GAAKe,IAAI,CAACC,GAAG,CAAG,UAAU,CAAG,EAAG,CAAAJ,QAAA,CAEzDG,IAAI,CAACG,IAAI,EANLH,IAAI,CAACC,GAOJ,CAAC,EACV,CAAC,EACC,CAAC,CAEV,CAEA,cAAe,CAAApB,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}